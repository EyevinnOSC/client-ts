/**
 * This file was auto-generated by openapi-typescript.
 * Do not make direct changes to the file.
 */

export interface paths {
  '/': {
    /** Health check endpoint */
    get: {
      parameters: {
        query: {
          verbose?: boolean;
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: Partial<string> &
            Partial<{
              status: string;
              versions: {
                '@osaas/orchestrator': string;
              };
              environment: string;
              _links: {
                self: {
                  href: string;
                };
                api: {
                  href: string;
                };
              };
            }>;
        };
        /** Default Response */
        500: {
          schema: {
            status: string;
            reason: string;
          };
        };
      };
    };
  };
  '/meilisearchinstance': {
    /** List all running meilisearch instances */
    get: {
      responses: {
        /** Default Response */
        200: {
          schema: ({
            /** @description Name of the meilisearch instance */
            name: string;
            /** @description URL to instance API */
            url: string;
            resources: {
              license: {
                /** @description URL to license information */
                url: string;
              };
              apiDocs?: {
                /** @description URL to instance API documentation */
                url: string;
              };
              app?: {
                /** @description URL to instance application (GUI) */
                url: string;
              };
            };
            MasterKey: string;
          } & {
            _links: {
              self: {
                /** @description Instance resource */
                href: string;
              };
              logs?: {
                /** @description Get logs for this instance */
                href: string;
              };
              health?: {
                /** @description Get health status for this instance */
                href: string;
              };
              ports?: {
                /** @description Get exposed ports for this instance */
                href: string;
              };
              nodePorts?: {
                /** @description Get assigned NodePorts for this instance */
                href: string;
              };
              restart?: {
                /** @description Restart this instance */
                href: string;
              };
              update?: {
                /** @description Update this instance */
                href: string;
              };
              scale?: {
                /** @description Scale this instance */
                href: string;
              };
            };
          })[];
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
    /** Launch a new meilisearch instance */
    post: {
      parameters: {
        query: {
          beta?: boolean;
        };
        body: {
          body?: {
            /** @description Name of the meilisearch instance */
            name: string;
            MasterKey: string;
          };
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: {
            /** @description Name of the meilisearch instance */
            name: string;
            /** @description URL to instance API */
            url: string;
            resources: {
              license: {
                /** @description URL to license information */
                url: string;
              };
              apiDocs?: {
                /** @description URL to instance API documentation */
                url: string;
              };
              app?: {
                /** @description URL to instance application (GUI) */
                url: string;
              };
            };
            MasterKey: string;
          } & {
            _links: {
              self: {
                /** @description Instance resource */
                href: string;
              };
              logs?: {
                /** @description Get logs for this instance */
                href: string;
              };
              health?: {
                /** @description Get health status for this instance */
                href: string;
              };
              ports?: {
                /** @description Get exposed ports for this instance */
                href: string;
              };
              nodePorts?: {
                /** @description Get assigned NodePorts for this instance */
                href: string;
              };
              restart?: {
                /** @description Restart this instance */
                href: string;
              };
              update?: {
                /** @description Update this instance */
                href: string;
              };
              scale?: {
                /** @description Scale this instance */
                href: string;
              };
            };
          };
        };
        /** Default Response */
        403: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
        /** Default Response */
        409: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
  };
  '/restart/{id}': {
    /** Restart meilisearch */
    post: {
      parameters: {
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        204: {
          schema: string;
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
  };
  '/meilisearchinstance/{id}': {
    /** Obtain status and resource URLs for an meilisearch instance */
    get: {
      parameters: {
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: {
            /** @description Name of the meilisearch instance */
            name: string;
            /** @description URL to instance API */
            url: string;
            resources: {
              license: {
                /** @description URL to license information */
                url: string;
              };
              apiDocs?: {
                /** @description URL to instance API documentation */
                url: string;
              };
              app?: {
                /** @description URL to instance application (GUI) */
                url: string;
              };
            };
            MasterKey: string;
          } & {
            _links: {
              self: {
                /** @description Instance resource */
                href: string;
              };
              logs?: {
                /** @description Get logs for this instance */
                href: string;
              };
              health?: {
                /** @description Get health status for this instance */
                href: string;
              };
              ports?: {
                /** @description Get exposed ports for this instance */
                href: string;
              };
              nodePorts?: {
                /** @description Get assigned NodePorts for this instance */
                href: string;
              };
              restart?: {
                /** @description Restart this instance */
                href: string;
              };
              update?: {
                /** @description Update this instance */
                href: string;
              };
              scale?: {
                /** @description Scale this instance */
                href: string;
              };
            };
          };
        };
        /** Default Response */
        404: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
    /** Stop and remove an meilisearch instance */
    delete: {
      parameters: {
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        204: {
          schema: string;
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
    /** Patch meilisearch instance with new parameters and restart */
    patch: {
      parameters: {
        body: {
          body?: {
            /** @description Name of the meilisearch instance */
            name?: string;
            MasterKey?: string;
          };
        };
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: {
            /** @description Name of the meilisearch instance */
            name: string;
            /** @description URL to instance API */
            url: string;
            resources: {
              license: {
                /** @description URL to license information */
                url: string;
              };
              apiDocs?: {
                /** @description URL to instance API documentation */
                url: string;
              };
              app?: {
                /** @description URL to instance application (GUI) */
                url: string;
              };
            };
            MasterKey: string;
          } & {
            _links: {
              self: {
                /** @description Instance resource */
                href: string;
              };
              logs?: {
                /** @description Get logs for this instance */
                href: string;
              };
              health?: {
                /** @description Get health status for this instance */
                href: string;
              };
              ports?: {
                /** @description Get exposed ports for this instance */
                href: string;
              };
              nodePorts?: {
                /** @description Get assigned NodePorts for this instance */
                href: string;
              };
              restart?: {
                /** @description Restart this instance */
                href: string;
              };
              update?: {
                /** @description Update this instance */
                href: string;
              };
              scale?: {
                /** @description Scale this instance */
                href: string;
              };
            };
          };
        };
        /** Default Response */
        400: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
        /** Default Response */
        404: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
  };
  '/health/{id}': {
    /** Return status of meilisearch instance */
    get: {
      parameters: {
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: {
            /** @enum {string} */
            status: 'starting' | 'running' | 'stopped' | 'failed' | 'unknown';
            images?: string[];
          };
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
  };
  '/logs/{id}': {
    /** Return the latest logs from the meilisearch instance */
    get: {
      parameters: {
        query: {
          timestamps?: boolean;
          sinceSeconds?: number;
        };
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: string;
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
  };
  '/ports/{id}': {
    /** Return the exposed extra ports for meilisearch instance */
    get: {
      parameters: {
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: {
            externalIp: string;
            externalPort: number;
            internalPort: number;
          }[];
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
  };
  '/nodeports/{id}': {
    /** Return the assigned NodePorts for meilisearch instance */
    get: {
      parameters: {
        path: {
          /** Name of the meilisearch instance */
          id: string;
        };
      };
      responses: {
        /** Default Response */
        200: {
          schema: {
            name: string;
            protocol: Partial<'TCP'> & Partial<'UDP'>;
            port: number;
            ip?: string;
          }[];
        };
        /** Default Response */
        500: {
          schema: {
            /** @description Reason why something failed */
            reason: string;
          };
        };
      };
    };
  };
}

export interface definitions {}

export interface operations {}

export interface external {}

export type MeilisearchMeilisearch =
  paths['/meilisearchinstance/{id}']['get']['responses']['200']['schema'];

export type MeilisearchMeilisearchConfig =
  paths['/meilisearchinstance']['post']['parameters']['body']['body'];
import {
  Context,
  createInstance,
  waitForInstanceReady,
  removeInstance,
  getInstance
} from '@osaas/client-core';
/**
 * @namespace meilisearch-meilisearch
 * @description Transform your search experience with Meilisearch, the lightning-fast, intuitive search engine that integrates seamlessly into your apps. Boost efficiency with advanced features like hybrid search, typo tolerance, and filtering.
 * @author Eyevinn Technology AB <osc@eyevinn.se>
 * @copyright 2026 Eyevinn Technology AB
 *
 */

/**
 * @typedef {Object} MeilisearchMeilisearchConfig
 * @property {string} name - Name of meilisearch
 * @property {string} MasterKey - The master API key used for authentication and security management in Meilisearch. This key provides full access to all Meilisearch operations and is used to create other API keys with fine-grained permissions.

 * 
 */

/**
 * @typedef {Object} MeilisearchMeilisearch
 * @property {string} name - Name of the Meilisearch instance
 * @property {string} url - URL of the Meilisearch instance
 *
 */

/**
 * Create a new Meilisearch instance
 *
 * @memberOf meilisearch-meilisearch
 * @async
 * @param {Context} context - Open Source Cloud configuration context
 * @param {MeilisearchMeilisearchConfig} body - Service instance configuration
 * @returns {MeilisearchMeilisearch} - Service instance
 * @example
 * import { Context } from '@osaas/client-core';
 * import { createMeilisearchMeilisearchInstance } from '@osaas/client-services';
 *
 * const ctx = new Context();
 * const body: MeilisearchMeilisearchConfig = { name: 'myinstance', ... };
 * const instance = await createMeilisearchMeilisearchInstance(ctx, body);
 * console.log(instance.url);
 */
export async function createMeilisearchMeilisearchInstance(
  ctx: Context,
  body: MeilisearchMeilisearchConfig
): Promise<MeilisearchMeilisearch> {
  const serviceAccessToken = await ctx.getServiceAccessToken(
    'meilisearch-meilisearch'
  );
  const instance = await createInstance(
    ctx,
    'meilisearch-meilisearch',
    serviceAccessToken,
    body
  );
  await waitForInstanceReady('meilisearch-meilisearch', instance.name, ctx);
  return instance;
}

/**
 * Remove a Meilisearch instance
 *
 * @memberOf meilisearch-meilisearch
 * @async
 * @param {Context} context - Open Source Cloud configuration context
 * @param {string} name - Name of the meilisearch to be removed
 */
export async function removeMeilisearchMeilisearchInstance(
  ctx: Context,
  name: string
): Promise<void> {
  const serviceAccessToken = await ctx.getServiceAccessToken(
    'meilisearch-meilisearch'
  );
  await removeInstance(
    ctx,
    'meilisearch-meilisearch',
    name,
    serviceAccessToken
  );
}

/**
 * Get a Meilisearch instance
 *
 * @memberOf meilisearch-meilisearch
 * @async
 * @param {Context} context - Open Source Cloud configuration context
 * @param {string} name - Name of the meilisearch to be retrieved
 * @returns {MeilisearchMeilisearch} - Service instance
 * @example
 * import { Context } from '@osaas/client-core';
 * import { getMeilisearchMeilisearchInstance } from '@osaas/client-services';
 *
 * const ctx = new Context();
 * const instance = await getMeilisearchMeilisearchInstance(ctx, 'myinstance');
 * console.log(instance.url);
 */
export async function getMeilisearchMeilisearchInstance(
  ctx: Context,
  name: string
): Promise<MeilisearchMeilisearch> {
  const serviceAccessToken = await ctx.getServiceAccessToken(
    'meilisearch-meilisearch'
  );
  return await getInstance(
    ctx,
    'meilisearch-meilisearch',
    name,
    serviceAccessToken
  );
}
